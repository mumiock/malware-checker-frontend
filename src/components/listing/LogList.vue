<template>
  <div class="table-container">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Id</th>
          <th>Type</th>
          <th>Ip/Link</th>
          <th>Time</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr
          v-for="(log, index) in logs"
          :log="log"
          :key="index"
          class="log-row"
        >
          <td class="log-cell">
            <span :class="['log-indicator', 'align-middle']">{{
              index + 1
            }}</span>
          </td>
          <td class="log-cell">
            <span class="font-weight-medium">{{ log.type }}</span>
          </td>
          <td class="log-cell">
            <span class="font-weight-medium">{{ log.data }}</span>
          </td>
          <td class="log-cell">
            <span class="text-muted">{{ log.time }}</span>
          </td>
          <td class="log-cell">
            <button
              class="btn btn-success"
              :style="{ backgroundColor: log.color }"
              @click="openModal(log)"
            >
              Show Data
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <div>
      <div
        class="modal"
        :class="{ show: isModalOpen }"
        title="Raw JSON Data"
        tabindex="-1"
        @click="closeModalOutside"
      >
        <div class="modal-dialog">
          <div class="modal-content" data-bs-backdrop="static">
            <div class="modal-header">
              <h5 class="modal-title">Detailed Log Data</h5>
              <button
                type="button"
                class="btn-close"
                @click="closeModal"
              ></button>
            </div>
            <div class="modal-body" @click.stop>
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Ip/Link</th>
                    <th>Time</th>
                    <th>Status</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="log-cell">
                      <span class="font-weight-medium">{{
                        jsonData.type
                      }}</span>
                    </td>
                    <td class="log-cell">
                      <span class="font-weight-medium">{{
                        jsonData.data
                      }}</span>
                    </td>
                    <td class="log-cell">
                      <span class="text-muted">{{ jsonData.time }}</span>
                    </td>
                    <td class="log-cell">
                      <button
                        class="btn btn-success"
                        :style="{ backgroundColor: jsonData.color }"
                      ></button>
                    </td>
                  </tr>
                </tbody>
              </table>

              <div class="code-container">
                <code>{{ jsonData.code }}</code>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  props: ["logs"],
  data() {
    return {
      jsonData: {
        type: "inputType",
        data: "inputData",
        time: "14:12",
        color: "border-theme-1",
        key: 0,
        code: "code",
      },
      isModalOpen: false,
    };
  },
  methods: {
    openModal(log) {
      this.jsonData = log;
      this.isModalOpen = true;
    },
    closeModal() {
      this.jsonData = {
        type: "inputType",
        data: "inputData",
        time: "14:12",
        color: "border-theme-1",
        key: 0,
        code: "code",
      };
      this.isModalOpen = false;
    },
    closeModalOutside(event) {
      if (event.target.classList.contains("modal")) {
        this.closeModal();
      }
    },
  },
};
</script>
<style scoped>
/* Add your custom styles here */
.modal {
  background: rgba(255, 255, 255, 0.9); /* Light background color */
}

.modal.show {
  display: block;
}

.code-container {
  max-height: 400px; /* Adjust as needed */
  overflow-y: auto;
}
.table-container {
  width: 100%;
  margin-top: 20px;
}

.log-row {
  border-bottom: 1px solid #dee2e6;
}

.log-cell {
  padding: 10px;
}

.log-indicator {
  display: inline-block;
  width: 15px;
  height: 15px;
  border-radius: 50%;
}

.font-weight-medium {
  font-weight: 500;
}

.text-muted {
  color: #6c757d;
}
</style>
